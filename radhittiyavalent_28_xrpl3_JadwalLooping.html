<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menghitung Indeks Prestasi</title>
    <style>
        table {
            border-collapse: collapse; /* Menggabungkan border tabel */
        }
        th, td {
            border: 1px solid #ddd; /* Border untuk sel tabel */
            padding: 8px;           /* Padding untuk sel tabel */
            text-align: left;       /* Teks rata kiri dalam sel */
        }
    </style>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="w-full flex flex-col justify-center items-center font-mono">
    <h1 class="my-5 mt-20 text-2xl">Menghitung Indeks Prestasi</h1>
    <!-- Heading utama halaman -->

    <h1 id="notify" class="my-5 px-2 text-sm text-gray-800 bg-red-300 rounded-md hidden"></h1>
    <!-- Notifikasi untuk pesan error -->

    <h1 id="credit" class="my-2 px-2 text-sm text-gray-800 bg-green-300 rounded-md hidden"></h1>
    <!-- Notifikasi untuk credit -->

    <table>
        <tr>
            <th>Komponen</th>
            <th>Bobot</th>
            <th>Nilai</th>
        </tr>
        <!-- Header tabel -->

        <tr>
            <td>Quis</td>
            <td>10%</td>
            <td><input onkeyup="calculate()" class="w-full px-2 rounded-md" min="0" max="100" type="number" name="quis" id="quis" placeholder="masukkan nilai"></td>
            <!-- Input nilai Quis. onkeyup digunakan untuk memanggil fungsi calculate setiap kali pengguna melepaskan tombol pada keyboard. onchange adalah sebuah atribut atau event handler dalam HTML dan JavaScript yang digunakan untuk menangani perubahan pada elemen input, seperti teks, checkbox, dropdown, dan elemen form lainnya. Ketika nilai dari elemen tersebut berubah, fungsi yang terhubung dengan event onchange akan dijalankan.-->
        </tr>
        <tr>
            <td>Tugas</td>
            <td>20%</td>
            <td><input onkeyup="calculate()" class="w-full px-2 rounded-md" min="0" max="100" type="number" name="tugas" id="tugas" placeholder="masukkan nilai"></td>
            <!-- Input nilai Tugas -->
        </tr>
        <tr>
            <td>UTS</td>
            <td>30%</td>
            <td><input onkeyup="calculate()" class="w-full px-2 rounded-md" min="0" max="100" type="number" name="uts" id="uts" placeholder="masukkan nilai"></td>
            <!-- Input nilai UTS -->
        </tr>
        <tr>
            <td>UAS</td>
            <td>40%</td>
            <td><input onkeyup="calculate()" class="w-full px-2 rounded-md" min="0" max="100" type="number" name="uas" id="uas" placeholder="masukkan nilai"></td>
            <!-- Input nilai UAS -->
        </tr>
        <tr>
            <td colspan="2">Indeks Prestasi</td>
            <td id="indeks-presentasi">-</td>
            <!-- Menampilkan Indeks Prestasi -->
        </tr>
        <tr>
            <td colspan="2">Keterangan</td>
            <td id="keterangan">Masukkan Value Data</td>
            <!-- Menampilkan keterangan -->
        </tr>
        <tr>
            <td colspan="2">Nilai Akhir</td>
            <td id="nilai-akhir">-</td>
            <!-- Menampilkan Nilai Akhir -->
        </tr>
        <tr>
            <td colspan="3"><button onclick="reset()" class="w-full transition border-none outline-none hover:bg-gray-500 hover:text-white rounded-md">Reset</button></td>
            <!-- Tombol Reset untuk mengatur ulang semua input dan hasil -->
        </tr>
    </table>

    <script>
        var credit = "Candra";
        var creditBool = false;

        function reset() {
            sendError(true);
            let nilaiQuis = document.getElementById("quis");
            let nilaiTugas = document.getElementById("tugas");
            let nilaiUTS = document.getElementById("uts");
            let nilaiUAS = document.getElementById("uas");

            // Menghapus kelas error dari input dan mengatur ulang nilai input
            [nilaiQuis, nilaiTugas, nilaiUTS, nilaiUAS].forEach((nilai) => {
                nilai.classList.remove("bg-red-300");
                nilai.value = "";
            });

            // Mengatur ulang teks hasil
            document.getElementById("nilai-akhir").textContent = "-";
            document.getElementById("indeks-presentasi").textContent = "-";
            document.getElementById("keterangan").textContent = "Berhasil Direset";
        }

        function sendError(message) {
            const elmt = document.getElementById("notify");
            // Menampilkan atau menyembunyikan pesan error
            if (message === true || message === "") {
                elmt.classList.add("hidden");
            } else {
                elmt.classList.remove("hidden");
                elmt.innerText = message;
            }
        }

        function isCancelled() {
            let nilaiQuis = document.getElementById("quis");
            let nilaiTugas = document.getElementById("tugas");
            let nilaiUTS = document.getElementById("uts");
            let nilaiUAS = document.getElementById("uas");

            let result = false;
            let listError = [];

            // Memeriksa validitas input
            [nilaiQuis, nilaiTugas, nilaiUTS, nilaiUAS].forEach((nilai) => {
                if (nilai.value === "") {
                    nilai.classList.add("bg-red-300");
                    listError.push(`nilai ${nilai.name} kosong`);
                } else if (+nilai.value > 100) {
                    nilai.classList.add("bg-red-300");
                    listError.push(`${nilai.name} lebih dari 100`);
                } else if (+nilai.value < 0) {
                    nilai.classList.add("bg-red-300");
                    listError.push(`${nilai.name} kurang dari 0`);
                } else {
                    nilai.classList.remove("bg-red-300");
                }
            });

            // Menampilkan error jika ada
            if (listError.length > 0) {
                sendError(`Masalah Value: ${listError.join(", ")}`);
                document.getElementById("nilai-akhir").textContent = "-";
                document.getElementById("indeks-presentasi").textContent = "-";
                document.getElementById("keterangan").textContent = "Nilai Invalid";
                result = true;
            } else {
                sendError(true);
            }

            return result;
        }

        function calculate() {
            let creditElmt = document.getElementById("credit");
            if (creditBool) {
                creditElmt.classList.remove("hidden");
                creditElmt.innerText = "Credit: " + credit;
            }

            // Mengambil nilai dari input
            let nilaiQuis = +document.getElementById("quis").value;
            let nilaiTugas = +document.getElementById("tugas").value;
            let nilaiUTS = +document.getElementById("uts").value;
            let nilaiUAS = +document.getElementById("uas").value;
            let nilaiAkhir = (nilaiQuis * 0.1) + (nilaiTugas * 0.2) + (nilaiUTS * 0.3) + (nilaiUAS * 0.4);
            let indeksPrestasi;
            let keterangan;

            // Jika input valid, menghitung dan menampilkan hasil
            if (!isCancelled()) {
                if (nilaiAkhir >= 80 && nilaiAkhir <= 100) {
                    indeksPrestasi = 'A';
                    keterangan = 'Lulus dengan Sangat Baik';
                } else if (nilaiAkhir >= 68 && nilaiAkhir < 80) {
                    indeksPrestasi = 'B';
                    keterangan = 'Lulus dengan Baik';
                } else if (nilaiAkhir >= 55 && nilaiAkhir < 68) {
                    indeksPrestasi = 'C';
                    keterangan = 'Lulus dengan Cukup';
                } else if (nilaiAkhir >= 38 && nilaiAkhir < 55) {
                    indeksPrestasi = 'D';
                    keterangan = 'Lulus dengan Kurang';
                } else {
                    indeksPrestasi = 'F';
                    keterangan = 'Tidak Lulus';
                }

                document.getElementById("nilai-akhir").textContent = nilaiAkhir.toFixed(2);
                document.getElementById("indeks-presentasi").textContent = indeksPrestasi;
                document.getElementById("keterangan").textContent = keterangan;
            }
        }
    </script>
</body>
</html
